<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="node_modules/bootstrap-slider/dist/css/bootstrap-slider.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
      <div id = "cover"><img src="/img/line2.gif"></div>
      <div class = "container">
        <div class="row">
          <div class="col-xs-5 center-block">
           <div class="input-group inputs">
              <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
              <input type="text" id = "artist" class=" typeahead form-control " placeholder="Artist">
          </div>
          <div class="input-group inputs">
            <span class="input-group-addon"><span class="glyphicon glyphicon-music"></span></span>
            <input type="text" id = "track" class=" typeahead form-control " placeholder="Title">
          </div>
          <a id = "dropdown"href="#demo" data-toggle="collapse" >Click for More Search Options</a>
          <div id="demo" class="collapse">
            
            <div class = "slider-container single-value-container single-value">
              <label class="headings" for="results">No. of Tracks</label>
              <div class="slider-and-value">
                <div id = "track-result-slider">
                  <span class = "current-values-container-left" id="resultsMax-value-label"><span class="current-values" id="resultsMax-value-left"></span></span>
                    <input id="results" type="text" class="span2" value=""/>
                  <span class = "current-values-container-right" id=""><span class="current-values"id=""></span></span>
                </div>
                <div class="checkbox-container">
                  <input type="checkbox" id="c1" name="cc" />
                  <label id ="results-label"class ="check-label"for="c1"><span></span></label>
                </div>
              </div>
            </div>

              <div class = "slider-container">
                <label class="headings" for="hotsong">Max/Min Song Hottness</label>
                <div class="slider-and-value">
                  <div id = "song-hotness-slider">
                    <span class = "current-values-container-left" id="hotsong-value-label"><span class="current-values" id="hotsong-value-left"></span></span>
                      <span class="divider">/</span>           
                      <span class = "current-values-container-right" id="hotsong-value-label"><span class="current-values"id="hotsong-value-right"></span></span>
                    <input id="hotsong" type="text" class="span2" value=""/>
                  </div>
                  <div class="checkbox-container">
                    <input type="checkbox" id="c2" name="cc" />
                      <label id ="hotsong-label"class ="check-label"for="c2"><span></span></label>
                  </div>
                </div>
              </div>

              <div class = "slider-container">
                <label class="headings" for="hotartist">Max/Min Artist Hottness</label>
                <div class="slider-and-value">
                  <div id = "artist-hotness-slider">
                    <span class = "current-values-container-left" id="hotartist-value-label"><span class="current-values" id="hotartist-value-left"></span></span>
                      <span class="divider">/</span>
                      <span class = "current-values-container-right" id="hotartist-value-label"><span class="current-values"id="hotartist-value-right"></span></span> 
                    <input id="hotartist" type="text" class="span2" value=""/>
                  </div>
                  
                  <div class="checkbox-container">
                    <input type="checkbox" id="c3" name="cc" />
                      <label id ="hotartist-label"class ="check-label"for="c3"><span></span></label>
                  </div>
                </div>
              </div>

              <div class = "slider-container">
                <label class="headings" for="artistfamiliar">Max/Min Artist Familiarity</label>
                <div class="slider-and-value">
                  <div id = "artist-familiar-slider">
                    <span class = "current-values-container-left" id="artistfamiliar-value-label"><span class="current-values" id="artistfamiliar-value-left"></span></span></span>
                      <span class="divider">/</span>
                      <span class = "current-values-container-right" id="artistfamiliar-value-label"><span class="current-values"id="artistfamiliar-value-right"></span></span>
                    <input id="artistfamiliar" type="text" class="span2" value=""/>
                  </div>
                  <div class="checkbox-container">
                    <input type="checkbox" id="c6" name="cc" />
                    <label id ="artistfamiliar-label"class ="check-label"for="c6"><span></span></label>
                  </div>
                </div>
              </div>
                
             

              <div class = "slider-container">
                <label class="headings" for="duration">Max/Min Duration</label>
                <div class="slider-and-value">
                  <div id="duration-slider">
                    <span class = "current-values-container-left" id="duration-value-label"><span class="current-values" id="duration-value-left"></span></span></span>
                      <span class="divider">/</span>
                      <span class = "current-values-container-right" id="duration-value-label"><span class="current-values"id="duration-value-right"></span></span>
                    <input id="duration" type="text" class="span2" value=""/>
                  </div>
                  <div class="checkbox-container">
                    <input type="checkbox" id="c4" name="cc" />
                    <label id ="duration-label"class ="check-label"for="c4"><span></span></label>
                  </div>
                </div>
              </div>
              
              <div class = "slider-container">
                <label class="headings" for="tempo">Max/Min Tempo</label>
                <div class="slider-and-value">
                  <div id="tempo-slider">
                    <span class = "current-values-container-left" id="tempo-value-label"><span class="current-values" id="tempo-value-left"></span></span></span>
                      <span class="divider">/</span>
                      <span class = "current-values-container-right" id="tempo-value-label"><span class="current-values"id="tempo-value-right"></span></span>
                    <input id="tempo" type="text" class="span2" value=""/>
                  </div>
                  <div class="checkbox-container">
                    <input type="checkbox" id="c5" name="cc" />
                    <label id ="tempo-label"class ="check-label"for="c5"><span></span></label>
                  </div>
                </div>
              </div>
            </div>
            
            <h3 id = "playlist-info">Login to Spotify to publish playlist </h3>
            <button class="btn btn-default"id = "mybutton5">Preview Playlist</button>
           
          <a class ="auth-link" ><button id = "login" class="btn btn-default" >Login</button></a>
        </div> 
        <div class="panel panel-default " id = "originalPlaylist">
          <div class="panel-heading">Playlist</div>
            <div role="tabpanel">
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#playlist-tracks" aria-controls="playlist-tracks" role="tab" data-toggle="tab">Tracks</a></li>
                <li role="presentation"><a href="#playlist-artists" aria-controls="playlist-artists" role="tab" data-toggle="tab">Artist</a></li>
              </ul>
              <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="playlist-tracks">
                  <div class="panel-body">
                    <ul class="list-group" id = "tracks">
                    </ul>
                    <div class = "navi" id = "tracks-links"></div>
                  </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="playlist-artists">
                  <div class="panel-body">
                    <div class="row" id="artists-thumb">
                    </div>
                  </div>
                </div>
              </div>
            </div>  
          </div> 
        </div>
           <!-- <div id = "wait"><img src="/img/gif-load (1).gif"></div>-->
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.1.min.js"><\/script>')</script>
        <script type="text/javascript" src="js/vendor/typehead.js"></script>
        <script src="js/vendor/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/jPages.js"></script>
        <script type="text/javascript" src="node_modules/bootstrap-slider/js/bootstrap-slider.js"></script>
        <script src="js/main.js"></script>
        <script type="text/javascript" src="//localhost:3000/socket.io/socket.io.js">></script>
        <script type="text/javascript">
        
        var resultsMax=15;
        var resultsSlider = $('#results').slider({
          max:100,
          min:1,
          step:1,
          value:40,
          enabled:false
        });
        $("#resultsMax-value-left").text(40);
        $("#results").on("slide", function(slideEvt) {
          $("#resultsMax-value-left").text(slideEvt.value);
        });
        $("#c1").click(function() {
          if(!this.checked) {
            $("#results").slider("disable");
              resultsMax=50;
              $('#track-result-slider').css('opacity','.5');
            }
            else {
              $("#results").slider("enable");
              $('#track-result-slider').css('opacity','1');
              $("#results").on("slide", function(slideEvt) {
                resultsMax = slideEvt.value;
              });
            }
        });

        var hotSongMax='';
        var hotSongMin='';
        var tempoSlider = $('#hotsong').slider({
          max:100,
          min:10,
          step:1,
          value:[40,50],
          enabled:false
        });
        $("#hotsong-value-left").text(40);
        $("#hotsong-value-right").text(50);
        $("#hotsong").on("slide", function(slideEvt) {
          $("#hotsong-value-left").text(slideEvt.value[0]);
          $("#hotsong-value-right").text(slideEvt.value[1]);
        });
        $("#c2").click(function() {
        //  $('#song-hotness-slider').removeClass( "blue" ).toggleClass( "opacity-toggle-enable" );
          if(!this.checked) {
            $("#hotsong").slider("disable");
            $('#song-hotness-slider').css('opacity','.5');
              hotSongMin='';
              hotSongMax='';

            }
            else {
              $("#hotsong").slider("enable");
              $('#song-hotness-slider').css('opacity','1');
              $("#hotsong").on("slide", function(slideEvt) {
                hotSongMin = slideEvt.value[0]/100;
                hotSongMax = slideEvt.value[1]/100;
              });
            }
        });

        var hotArtistMax='';
        var hotArtistMin='';
        $('#hotartist').slider({
          max:100,
          min:10,
          step:1,
          value:[40,50],
          enabled:false
        });
        $("#hotartist-value-left").text(40);
        $("#hotartist-value-right").text(50);
        $("#hotartist").on("slide", function(slideEvt) {
          $("#hotartist-value-left").text(slideEvt.value[0]);
          $("#hotartist-value-right").text(slideEvt.value[1]);
        });
        $("#c3").click(function() {
        //  $('#artist-hotness-slider').toggleClass( "opacity-toggle-enable" );

          if(!this.checked) {
            $("#hotartist").slider("disable");
              hotArtistMax='';
              hotArtistMin='';
              $('#artist-hotness-slider').css('opacity','.5');
            }
            else {
              $('#artist-hotness-slider').css('opacity','1');
              $("#hotartist").slider("enable");
              $("#hotartist").on("slide", function(slideEvt) {
                hotArtistMin = slideEvt.value[0]/100;
                hotArtistMax = slideEvt.value[1]/100;
              });
            }
        });

        var durationMax='';
        var durationMin='';
        $('#duration').slider({
          max:3600,
          min:1,
          step:60,
          value:[1800,2400],
          enabled:false
        });
                var minutesleft = Math.floor(1800 / 60);
                var secondsleft = 1800 - minutesleft * 60;
                var left=minutesleft+":"+secondsleft+'0';
                var minutesright = Math.floor(2400 / 60);
                var secondsright = 2400 - minutesright * 60;
                var right=minutesright+":"+secondsright+'0';

        $("#duration-value-left").text(left);
        $("#duration-value-right").text(right);
        $("#duration").on("slide", function(slideEvt) {
                var minutesleft = Math.floor(slideEvt.value[0] / 60);
                var secondsleft = slideEvt.value[0] - minutesleft * 60;
                var left=minutesleft+":"+secondsleft+'0';
                var minutesright = Math.floor(slideEvt.value[1] / 60);
                var secondsright = slideEvt.value[1] - minutesright * 60;
                var right=minutesright+":"+secondsright+'0';
          $("#duration-value-left").text(left);
          $("#duration-value-right").text(right);
        });
        $("#c4").click(function() {
          if(this.checked) {
            $("#duration").slider("enable");
            $('#duration-slider').css('opacity','1');
              $("#duration").on("slide", function(slideEvt) {
                durationMin = slideEvt.value[0];
                durationMax = slideEvt.value[1];
              });
            }
            else {
              $('#duration-slider').css('opacity','5');
              $("#duration").slider("disable");
              durationMin='';
              durationMax='';
            }
        });

        var tempoMin='';
        var tempoMax='';
        var tempoSlider = $('#tempo').slider({
          max:500,
          min:0,
          step:1,
          value:[200,300],
          enabled:false
        });
        $("#tempo-value-left").text(200);
        $("#tempo-value-right").text(300);
        $("#tempo").on("slide", function(slideEvt) {
          $("#tempo-value-left").text(slideEvt.value[0]);
          $("#tempo-value-right").text(slideEvt.value[1]);
        });
        $("#c5").click(function() {
          if(!this.checked) {
            $("#tempo").slider("disable");
             $('#tempo-slider').css('opacity','.5');
              tempoMin='';
              tempoMax='';
            }
            else {
              $("#tempo").slider("enable");
               $('#tempo-slider').css('opacity','1');
              $("#tempo").on("slide", function(slideEvt) {
                tempoMin = slideEvt.value[0];
                tempoMax = slideEvt.value[1];
              });
            }
        });



        var artistfamiliarMax='';
        var artistfamiliarMin='';
        $('#artistfamiliar').slider({
          max:100,
          min:10,
          step:1,
          value:[40,50],
          enabled:false
        });
        $("#artistfamiliar-value-left").text(40);
        $("#artistfamiliar-value-right").text(50);
        $("#artistfamiliar").on("slide", function(slideEvt) {
          $("#artistfamiliar-value-left").text(slideEvt.value[0]);
          $("#artistfamiliar-value-right").text(slideEvt.value[1]);
        });
        $("#c6").click(function() {
          if(!this.checked) {
            $("#artistfamiliar").slider("disable");
            $('#artist-familiar-slider').css('opacity','.5');
              artistfamiliarMax='';
              artistfamiliarMin='';
            }
            else {

            
              $("#artistfamiliar").slider("enable");
              $('#artist-familiar-slider').css('opacity','1');
              $("#artistfamiliar").on("slide", function(slideEvt) {
                artistfamiliarMin = slideEvt.value[0]/100;
                artistfamiliarMax = slideEvt.value[1]/100;
              });
            }
        });
        // get key from current url
         function getParameterByName(name) {
          name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
          var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
          results = regex.exec(location.search);
          return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
          }
          var socket = io.connect('//localhost:3000');           
              var code = getParameterByName('code');
              socket.emit('code', { x: code});
              socket.on('url', function(data) {
                $('.auth-link').attr('href',data.value);
                });
                $('#login').click(function(){
                localStorage.artistName = $('#artist').val();
                localStorage.trackName = $('#track').val();
                $('#artist').val(localStorage.artistName);  
                $('#track').val(localStorage.trackName);
              });
                $('#create-playlist').click(function(){
                var playlistName = localStorage.artistName + ':'+ localStorage.trackName +' '+ 'Playlist';
                if(!$('#artist').val() &&  !$('#track').val() && !spotifyTrackString){
                    localStorage.removeItem("tracksArray");
                }
                else{
                    socket.emit('playlsitName', { x: playlistName,y:localStorage.tracksArray.split(",")});
                }
              });
        </script>
        </div>
        
    </body>
</html>
